export class WbBlog{constructor(){this.classlaodMore="loadMore",this.classDisabled="button--disabled"}build(){getUrlWord("blog")&&(this.update(),this.buildMenu())}update(){this.page="pageBlog",this.$lastPost=document.querySelector("#"+this.page+"LastPost"),this.$mostViewed=document.querySelector("#"+this.page+"MostViewed")}buildMenu(){if(!this.$lastPost)return;let e=this.$lastPost.querySelector(`[data-id="${this.classlaodMore}"]`),t=this.$mostViewed.querySelector(`[data-id="${this.classlaodMore}"]`);document.contains(e)&&e.addEventListener("click",()=>{this.loadMore(e)}),document.contains(t)&&t.addEventListener("click",()=>{this.loadMore(t)})}loadMore(e){let t=this,s=e.parentNode.parentNode.getAttribute("id"),o=s.substring(this.page.length),l=new XMLHttpRequest,a=objWbUrl.getController({folder:"blog",file:"LoadMore"}),i="&target="+o;e.classList.add(this.classDisabled),l.open("POST",a,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onreadystatechange=(()=>{4===l.readyState&&200===l.status&&(e.classList.remove(this.classDisabled),t.loadMoreSuccess(s,l.responseText))}),l.send(i)}loadMoreSuccess(e,t){let s=JSON.parse(t),o=document.querySelector("#"+e),l=o.querySelector(".blog-list"),a=o.querySelector('[data-id="'+this.classlaodMore+'"]');s[this.classlaodMore]||a.classList.add(this.classDisabled),l.insertAdjacentHTML("beforeend",s.html),window.scrollTo(0,document.documentElement.scrollTop+1),window.scrollTo(0,document.documentElement.scrollTop-1)}};export class WbForm{build(){getUrlWord("contact")&&(this.update(),this.buildMenu())}update(){this.$page=document.querySelector("#pageContact"),this.$form=this.$page.querySelector(".form"),this.$formFieldName=this.$form.querySelector('[data-id="fieldName"]'),this.$formFieldEmail=this.$form.querySelector('[data-id="fieldEmail"]'),this.$formFieldMessage=this.$form.querySelector('[data-id="fieldMessage"]'),this.$btSend=this.$page.querySelector('[data-id="btSend"]')}buildMenu(){const e=this;this.$btSend.addEventListener("click",()=>{form.validateEmpty([e.$formFieldEmail,e.$formFieldMessage])&&e.send()})}send(){const e=this,t=new XMLHttpRequest,s=objWbUrl.getController({folder:"contact",file:"FormAjax"});let o="&method=sendForm&name="+this.$formFieldName.value+"&email="+this.$formFieldEmail.value+"&message="+this.$formFieldMessage.value+"&token="+globalToken;this.$btSend.setAttribute("disabled","disabled"),t.open("POST",s,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(e.$btSend.removeAttribute("disabled"),e.response(t.responseText))},t.send(o)}response(e){let t="",s="";switch(e){case"ok":s="green",t=globalTranslation.formSent;break;default:s="red",t=globalTranslation.formProblemSend}notification.add({text:t,color:s})}};export class WbTranslation{build(){this.update(),this.defineActive(),this.buildMenu()}buildMenu(){this.$select.addEventListener("change",function(){let e=this.selectedIndex,t=this.options[e].getAttribute("data-url");window.location.replace(t)})}defineActive(){this.$select.value=globalLanguage}update(){this.$select=document.querySelector("#translationSelect")}};export class WbUrl{buildSEO(e){return e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").toLowerCase().replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")}build(e){window.location=globalUrl+window.globalLanguage+"/"+e+"/"}buildVersion(){const e=JSON.parse(globalVersion);this.pathSite=`./site/${e.site}/php/`}getController(e){return this.buildVersion(),`${this.pathSite}controller/${e.folder}/${e.file}.php`}getView(e){return this.buildVersion(),`${this.pathSite}view/${e.folder}/${e.file}.php`}watch(e,t){const s=this;e.addEventListener("focusout",function(){t.value=s.buildSEO(e.value)})}};
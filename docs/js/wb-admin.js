class WbAdmin{constructor(){objWbDebug.debugMethod(this,"constructor"),this.pageCurrent=""}build(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin")&&(this.updateVariable(),this.buildMenuDifeneActive(),this.builTableTdWrapper())}updateVariable(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.$page=document.querySelector("#mainContent"),document.contains(this.$page)&&(this.$btBlog=this.$page.querySelector('[data-id="btAdminBlog"]'),this.$btUpload=this.$page.querySelector('[data-id="btAdminImage"]'),this.$btLogout=this.$page.querySelector('[data-id="btAdminLogout"]'))}buildMenuDifeneActive(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=window.location.href.split("/"),t=e[e.length-2],o=t.charAt(0).toUpperCase()+t.slice(1),i=document.querySelector('#mainContent [data-id="btAdmin'+o+'"]');null!==i&&i.parentNode.classList.add("menu-tab-active")}builTableTdWrapper(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=document.querySelectorAll(".td-wrapper");Array.prototype.forEach.call(e,function(e){e.onclick=function(){e.classList.contains("td-wrapper-auto")?e.classList.remove("td-wrapper-auto"):e.classList.add("td-wrapper-auto")}})}showResponse(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName(),e);let t="",o="";switch(e){case"done":location.reload();break;case"problemPermission":t="red",o=globalTranslation.problemPermission;break;default:t="red",o=globalTranslation.errorAdministrator}objWfNotification.add(o,t)}}class WbAdminBlog{build(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin/blog")&&(CKEDITOR.replace("fieldContent",{}),CKEDITOR.config.basicEntities=!1,CKEDITOR.config.entities_greek=!1,CKEDITOR.config.entities_latin=!1,CKEDITOR.config.entities_additional="",this.update(),this.buildMenu(),this.buildMenuTable(),this.buildMenuThumbnail(),objWbUrl.watch(this.$formFieldTitle,this.$formFieldUrl))}update(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.isEdit=!1,this.editId=0,this.$page=document.querySelector("#pageAdminBlog"),this.$contentEdit=document.querySelector("#pageAdminBlogEdit"),this.$contentEditThumbnail=this.$contentEdit.querySelector('[data-id="thumbnailWrapper"]'),this.$contentList=document.querySelector("#pageAdminBlogList"),this.$formRegister=this.$contentEdit.querySelector('[data-id="formRegister"]'),this.$formFieldTitle=this.$contentEdit.querySelector('[data-id="fieldTitle"]'),this.$formFieldUrl=this.$contentEdit.querySelector('[data-id="fieldUrl"]'),this.$formFieldContent=this.$contentEdit.querySelector('[data-id="fieldContent"]'),this.$formFieldTag=this.$contentEdit.querySelector('[data-id="fieldTag"]'),this.$formFieldGallery=this.$contentEdit.querySelector('[data-id="fieldGallery"]'),this.$formFieldDatePost=this.$contentEdit.querySelector('[data-id="fieldDatePost"]'),this.$formFieldDateEdit=this.$contentEdit.querySelector('[data-id="fieldDateEdit"]'),this.$thumbnailWrapper=this.$contentEdit.querySelector('[data-id="thumbnailWrapper"]'),this.$formFieldAuthor=document.querySelector('[data-id="author"]'),this.thumbnail="",this.thumbnailDefault="blog-thumbnail.jpg",this.pathImage="",this.pathThumbnail="dynamic/blog/thumbnail/",this.$ckEditor=CKEDITOR.instances.fieldContent,this.$btRegister=this.$page.querySelector('[data-id="btRegister"]')}buildMenu(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this;this.$btRegister.onclick=function(){e.validateForm()&&(e.isEdit?e.editSave():e.saveContent())}}buildMenuThumbnail(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this.$contentEditThumbnail.querySelectorAll(".table");Array.prototype.forEach.call(e,function(e){let t=e.querySelectorAll('[data-action="edit"]');Array.prototype.forEach.call(t,function(e){e.onclick=function(){objWfModal.buildModal("ajax",objWbUrl.getController({folder:"admin",file:"BlogThumbnail"}),"eb")}})})}buildMenuTable(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this,t=this.$contentList.querySelectorAll(".table"),o=this.$contentList.querySelectorAll('[data-id="tableActive"]'),i=this.$contentList.querySelectorAll('[data-id="tableInactive"]');Array.prototype.forEach.call(o,function(e){let t=e.querySelectorAll('[data-action="inactivate"]');Array.prototype.forEach.call(t,function(e){e.onclick=function(){objWfModal.buildModal("confirmation",globalTranslation.confirmationInactivate),objWfModal.buildContentConfirmationAction("objWbAdminBlog.modify("+e.getAttribute("data-id")+', "inactivate")')}})}),Array.prototype.forEach.call(i,function(t){let o=t.querySelectorAll('[data-action="activate"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.modify(t.getAttribute("data-id"),"activate")}})}),Array.prototype.forEach.call(t,function(t){let o=t.querySelectorAll('[data-action="edit"]'),i=t.querySelectorAll('[data-action="delete"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.editId=t.getAttribute("data-id"),e.editLoadData(e.editId)}}),Array.prototype.forEach.call(i,function(e){e.onclick=function(){objWfModal.buildModal("confirmation",globalTranslation.confirmationDelete),objWfModal.buildContentConfirmationAction("objWbAdminBlog.delete("+e.getAttribute("data-id")+")")}})})}editSave(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=new XMLHttpRequest,t=objWbUrl.getController({folder:"admin",file:"BlogAjax"}),o="&action=doUpdate&id="+this.editId+this.buildParameter()+"&token="+globalToken;e.open("POST",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&objWbAdmin.showResponse(e.responseText)},e.send(o)}editLoadData(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t=this,o=new XMLHttpRequest,i=objWbUrl.getController({folder:"admin",file:"BlogAjax"}),a="&action=editLoadData&id="+e+"&token="+globalToken;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){let e=JSON.parse(o.responseText);document.documentElement.scrollTop=0,t.isEdit=!0,t.editFillField(e),t.thumbnail=e.thumbnail.trim(),t.modifyThumbnail()}},o.send(a)}editFillField(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const t=e["date_post_"+globalLanguage],o=e["date_edit_"+globalLanguage];this.$formFieldTitle.value=e["title_"+globalLanguage],this.$formFieldUrl.value=e["url_"+globalLanguage],this.$formFieldTag.value=e["tag_"+globalLanguage],this.$formFieldGallery.value=e.gallery,this.$formFieldDatePost.value=null!==t?t.substring(0,10):t,this.$formFieldDateEdit.value=null!==o?o.substring(0,10):o,this.editId=e.id,this.$formFieldAuthor.value=e.author_id,this.$ckEditor.setData(e["content_"+globalLanguage],function(){this.checkDirty()})}modify(e,t){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let o=new XMLHttpRequest,i=objWbUrl.getController({folder:"admin",file:"BlogAjax"}),a="&action=doModify&status="+t+"&id="+e+"&token="+globalToken;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&objWbAdmin.showResponse(o.responseText)},o.send(a)}delete(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t=new XMLHttpRequest,o=objWbUrl.getController({folder:"admin",file:"BlogAjax"}),i="&action=doDelete&id="+e+"&token="+globalToken;t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&objWbAdmin.showResponse(t.responseText)},t.send(i)}validateForm(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=[this.$formFieldTitle,this.$formFieldUrl];return objWfForm.validateEmpty(e)}buildParameter(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this.thumbnail===this.thumbnailDefault?"":this.thumbnail;return"&title="+this.$formFieldTitle.value+"&url="+this.$formFieldUrl.value+"&content="+this.$ckEditor.getData()+"&datePost="+this.$formFieldDatePost.value+"&dateEdit="+this.$formFieldDateEdit.value+"&authorId="+this.$formFieldAuthor.value+"&thumbnail="+e+"&gallery="+this.$formFieldGallery.value+"&tag="+this.$formFieldTag.value}saveContent(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=new XMLHttpRequest,t=objWbUrl.getController({folder:"admin",file:"BlogAjax"}),o="&action=doSave"+this.buildParameter()+"&token="+globalToken;e.open("POST",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&objWbAdmin.showResponse(e.responseText)},e.send(o)}selectImage(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t=e.parentNode.parentNode.querySelector('[data-id="imageName"]').innerText;this.thumbnail=t,objWfModal.closeModal(),this.modifyThumbnail()}modifyThumbnail(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=this.$thumbnailWrapper.querySelector("table").querySelector('[data-id="thumbnail"]'),t=this.$thumbnailWrapper.querySelector("table").querySelector('[data-id="name"]');""===this.thumbnail||null===this.thumbnail?(this.thumbnail=this.thumbnailDefault,this.pathImage=""):this.pathImage=this.pathThumbnail,e.setAttribute("src","assets/img/"+this.pathImage+this.thumbnail),t.innerHTML=this.thumbnail}}class WbAdminPage{build(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin/page")&&(CKEDITOR.replace("fieldContent",{}),CKEDITOR.config.basicEntities=!1,CKEDITOR.config.entities_greek=!1,CKEDITOR.config.entities_latin=!1,CKEDITOR.config.entities_additional="",this.update(),this.buildMenu(),this.buildMenuTable(),objWbUrl.watch(this.$formFieldTitle,this.$formFieldUrl))}update(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.isEdit=!1,this.editId=0,this.$page=document.querySelector("#pageAdminPageEdit"),this.$ckEditor=CKEDITOR.instances.fieldContent,this.$contentList=document.querySelector("#pageAdminPageList"),this.$formFieldMenu=this.$page.querySelector('[data-id="formFieldMenu"]'),this.$formFieldTitle=this.$page.querySelector('[data-id="formFieldTitle"]'),this.$formFieldUrl=this.$page.querySelector('[data-id="formFieldUrl"]'),this.$btRegister=this.$page.querySelector('[data-id="btRegister"]')}buildMenu(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this;this.$btRegister.onclick=function(){e.validateForm()&&(e.isEdit?e.editSave():e.saveContent())}}buildMenuTable(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this,t=this.$contentList.querySelectorAll(".table"),o=this.$contentList.querySelectorAll('[data-id="tableActive"]'),i=this.$contentList.querySelectorAll('[data-id="tableInactive"]');Array.prototype.forEach.call(o,function(e){let t=e.querySelectorAll('[data-action="inactivate"]');Array.prototype.forEach.call(t,function(e){e.onclick=function(){objWfModal.buildModal("confirmation",globalTranslation.confirmationInactivate),objWfModal.buildContentConfirmationAction("objWbAdminPage.modify("+e.getAttribute("data-id")+', "inactivate")')}})}),Array.prototype.forEach.call(i,function(t){let o=t.querySelectorAll('[data-action="activate"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.modify(t.getAttribute("data-id"),"activate")}})}),Array.prototype.forEach.call(t,function(t){let o=t.querySelectorAll('[data-action="edit"]'),i=t.querySelectorAll('[data-action="delete"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.editId=t.getAttribute("data-id"),e.editLoadData(e.editId)}}),Array.prototype.forEach.call(i,function(e){e.onclick=function(){objWfModal.buildModal("confirmation",globalTranslation.confirmationDelete),objWfModal.buildContentConfirmationAction("objWbAdminPage.delete("+e.getAttribute("data-id")+")")}})})}validateForm(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=[this.$formFieldMenu,this.$formFieldTitle];return objWfForm.validateEmpty(e)}saveContent(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=new XMLHttpRequest,t=objWbUrl.getController({folder:"admin",file:"PageAjax"}),o="&action=doSave"+this.buildParameter()+"&token="+globalToken;e.open("POST",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&objWbAdmin.showResponse(e.responseText)},e.send(o)}editSave(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=new XMLHttpRequest,t=objWbUrl.getController({folder:"admin",file:"PageAjax"}),o="&action=doUpdate&id="+this.editId+this.buildParameter()+"&token="+globalToken;e.open("POST",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&objWbAdmin.showResponse(e.responseText)},e.send(o)}editLoadData(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t=this,o=new XMLHttpRequest,i=objWbUrl.getController({folder:"admin",file:"PageAjax"}),a="&action=editLoadData&id="+e+"&token="+globalToken;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){let e=JSON.parse(o.responseText);document.documentElement.scrollTop=0,t.isEdit=!0,t.editFillField(e)}},o.send(a)}editFillField(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.$formFieldTitle.value=e["title_"+globalLanguage],this.$formFieldUrl.value=e["url_"+globalLanguage],this.$formFieldMenu.value=e["menu_"+globalLanguage],this.editId=e.id,this.$ckEditor.setData(e["content_"+globalLanguage],function(){this.checkDirty()})}buildParameter(){return objWbDebug.debugMethod(this,objWbDebug.getMethodName()),"&title="+this.$formFieldTitle.value+"&url="+this.$formFieldUrl.value+"&menu="+this.$formFieldMenu.value+"&content="+this.$ckEditor.getData()}modify(e,t){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let o=new XMLHttpRequest,i=objWbUrl.getController({folder:"admin",file:"PageAjax"}),a="&action=doModify&status="+t+"&id="+e+"&token="+globalToken;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&objWbAdmin.showResponse(o.responseText)},o.send(a)}delete(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t=new XMLHttpRequest,o=objWbUrl.getController({folder:"admin",file:"PageAjax"}),i="&action=doDelete&id="+e+"&token="+globalToken;t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&objWbAdmin.showResponse(t.responseText)},t.send(i)}}class WbAdminUploadImage{constructor(){objWbDebug.debugMethod(this,"constructor"),this.deleteElement=""}build(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin/image")&&(this.updateVariable(),this.buildMenu())}updateVariable(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.$btUploadThumbnail=document.querySelector('[data-id="btUploadThumbnail"]'),this.$btUploadBanner=document.querySelector('[data-id="btUploadBanner"]')}buildMenu(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this;let t=document.querySelectorAll('[data-action="delete"]');this.$btUploadThumbnail.addEventListener("click",function(t){e.upload(this,"blog/thumbnail/")}),this.$btUploadBanner.addEventListener("click",function(t){e.upload(this,"blog/banner/")}),Array.prototype.forEach.call(t,function(t){t.onclick=function(){e.deleteImage(t)}})}deleteImage(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.deleteElement=e,objWfModal.buildModal("confirmation",globalTranslation.confirmationDelete),objWfModal.buildContentConfirmationAction("objWbAdminUploadImage.deleteImageAjax()")}deleteImageAjax(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this,t=new FormData,o=new XMLHttpRequest;let i=this.deleteElement.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('[data-id="fileName"]').innerText,a=this.deleteElement.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.getAttribute("data-path"),d=this.deleteElement.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;t.append("f",i),t.append("p",a),t.append("token",globalToken),o.open("POST",objWbUrl.getController({folder:"admin",file:"ImageDelete"})),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(e.buildResponse(o.responseText,d),objWfModal.closeModal())},o.send(t)}upload(e,t){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const o=this,i=e.parentNode.parentNode.parentNode.parentNode.parentNode,a=i.querySelector("[type=file]"),d=new FormData,n=new XMLHttpRequest,l=a.files[0],b=objWbUrl.getController({folder:"admin",file:"ImageUpload"});0!==a.files.length?(d.append("p",t),d.append("f",l),d.append("token",globalToken),this.$btUploadThumbnail.setAttribute("disabled","disabled"),n.open("POST",b),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(o.$btUploadThumbnail.removeAttribute("disabled"),o.buildResponse(n.responseText,i))},n.send(d)):a.click()}buildResponse(e,t){switch(objWbDebug.debugMethod(this,objWbDebug.getMethodName()),e){case"fileDeleted":case"uploadDone":objWfNotification.add(globalTranslation[e],"green",t),document.location.reload();break;default:objWfNotification.add(globalTranslation[e],"red",t)}}}class WbAdminUser{build(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("admin/user")&&(this.updateVariable(),this.buildMenu(),this.buildMenuTable())}updateVariable(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.isEdit=!1,this.editId=0,this.$page=document.querySelector("#pageAdminUser"),this.$formRegister=this.$page.querySelector('[data-id="formRegister"]'),this.$formFieldName=this.$formRegister.querySelector('[data-id="name"]'),this.$formFieldEmail=this.$formRegister.querySelector('[data-id="email"]'),this.$formFieldPassword=this.$formRegister.querySelector('[data-id="password"]'),this.$formFieldPermission=this.$formRegister.querySelector('[data-id="permission"]'),this.$formSend=this.$formRegister.querySelector('[data-id="send"]')}buildMenu(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());const e=this;this.$formSend.onclick=function(){e.validateForm()&&(e.isEdit?e.editSave():e.saveContent())}}buildMenuTable(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=this,t=this.$page.querySelectorAll(".table"),o=this.$page.querySelectorAll('[data-id="tableActive"]'),i=this.$page.querySelectorAll('[data-id="tableInactive"]');Array.prototype.forEach.call(o,function(e){let t=e.querySelectorAll('[data-action="inactivate"]');Array.prototype.forEach.call(t,function(e){e.onclick=function(){objWfModal.buildModal("confirmation",globalTranslation.confirmationInactivate),objWfModal.buildContentConfirmationAction("objWbAdminUser.modify("+e.getAttribute("data-id")+', "inactivate")')}})}),Array.prototype.forEach.call(i,function(t){let o=t.querySelectorAll('[data-action="activate"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.modify(t.getAttribute("data-id"),"activate")}})}),Array.prototype.forEach.call(t,function(t){let o=t.querySelectorAll('[data-action="edit"]'),i=t.querySelectorAll('[data-action="delete"]');Array.prototype.forEach.call(o,function(t){t.onclick=function(){e.editId=t.getAttribute("data-id"),e.editLoadData(e.editId)}}),Array.prototype.forEach.call(i,function(e){e.onclick=function(){objWfModal.buildModal("confirmation",globalTranslation.confirmationDelete),objWfModal.buildContentConfirmationAction("objWbAdminUser.delete("+e.getAttribute("data-id")+")")}})})}modify(e,t){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let o=new XMLHttpRequest,i=objWbUrl.getController({folder:"admin",file:"UserAjax"}),a="&action=doModify&status="+t+"&id="+e+"&token="+globalToken;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&objWbAdmin.showResponse(o.responseText)},o.send(a)}delete(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t=new XMLHttpRequest,o=objWbUrl.getController({folder:"admin",file:"UserAjax"}),i="&action=doDelete&id="+e+"&token="+globalToken;t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&objWbAdmin.showResponse(t.responseText)},t.send(i)}editLoadData(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t=this,o=new XMLHttpRequest,i=objWbUrl.getController({folder:"admin",file:"UserAjax"}),a="&action=editLoadData&id="+e+"&token="+globalToken;o.open("POST",i,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){let e=JSON.parse(o.responseText);document.documentElement.scrollTop=0,t.editFillField(e)}},o.send(a)}editFillField(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.isEdit=!0,this.$formFieldName.value=e.user,this.$formFieldEmail.value=e.e_mail,this.$formFieldPassword.value="",this.editId=e.id,this.$formFieldPermission.value=e.permission}editSave(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=new XMLHttpRequest,t=objWbUrl.getController({folder:"admin",file:"UserAjax"}),o="&action=doUpdate&id="+this.editId+this.buildParameter()+"&token="+globalToken;e.open("POST",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&objWbAdmin.showResponse(e.responseText)},e.send(o)}saveContent(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=new XMLHttpRequest,t=objWbUrl.getController({folder:"admin",file:"UserAjax"}),o="&action=doSave"+this.buildParameter()+"&token="+globalToken;e.open("POST",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&objWbAdmin.showResponse(e.responseText)},e.send(o)}validateForm(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=[this.$formFieldEmail,this.$formFieldPassword];return objWfForm.validateEmpty(e)}buildParameter(){return objWbDebug.debugMethod(this,objWbDebug.getMethodName()),"&user="+this.$formFieldName.value+"&e_mail="+this.$formFieldEmail.value+"&permission="+this.$formFieldPermission.value+"&password="+this.$formFieldPassword.value}}class WbLogin{build(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),getUrlWord("login")&&(this.update(),this.buildMenu())}update(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),this.isSignUp=!1,this.$page=document.querySelector("#pageAdminLogin"),this.$buttonLogin=document.querySelector("#pageAdminLoginBt"),this.$fielEmail=document.querySelector("#pageAdminLoginUser"),this.$fieldPassword=document.querySelector("#pageAdminLoginPassword")}buildMenu(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=this;this.$buttonLogin.addEventListener("click",function(t){e.buildLogin()})}validate(){return objWbDebug.debugMethod(this,objWbDebug.getMethodName()),""===this.$fielEmail.value?(this.$fielEmail.focus(),void this.buildLoginResponse("empty_email")):""!==this.$fieldPassword.value||(this.$fieldPassword.focus(),void this.buildLoginResponse("empty_password"))}buildLogin(){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let e=this,t=new XMLHttpRequest,o=objWbUrl.getController({folder:"admin",file:"LoginAjax"}),i="&email="+this.$fielEmail.value+"&password="+this.$fieldPassword.value+"&token="+globalToken;this.validate()&&(this.$buttonLogin.setAttribute("disabled","disabled"),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(e.$buttonLogin.removeAttribute("disabled"),e.buildLoginResponse(t.responseText))},t.send(i))}buildLoginResponse(e){objWbDebug.debugMethod(this,objWbDebug.getMethodName());let t="",o=this.$page.querySelector(".form");switch(e){case"inactive":t=globalTranslation.loginInactive;break;case"problem":t=globalTranslation.loginFail,this.$fielEmail.focus();break;case"empty_email":t=globalTranslation.emptyField,this.$fielEmail.focus();break;case"empty_password":t=globalTranslation.emptyField,this.$fieldPassword.focus();break;default:objWbUrl.build("admin")}objWfNotification.add(t,"red",o)}}class WbManagementAdmin{verifyLoad(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),window.addEventListener("load",this.applyClass(),{once:!0})}applyClass(){objWbDebug.debugMethod(this,objWbDebug.getMethodName()),objWbLogin.build(),objWbAdmin.build(),objWbAdminBlog.build(),objWbAdminUploadImage.build(),objWbAdminUser.build(),objWbAdminPage.build()}}var objWbDebug=new WbDebug,objWbAdmin=new WbAdmin,objWbAdminBlog=new WbAdminBlog,objWbAdminUploadImage=new WbAdminUploadImage,objWbAdminUser=new WbAdminUser,objWbLogin=new WbLogin,objWbManagementAdmin=new WbManagementAdmin,objWbAdminPage=new WbAdminPage;objWbManagementAdmin.verifyLoad();
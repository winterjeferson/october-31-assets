export class Blog{constructor(){this.results=10,this.limit,this.offset,this.filter="",this.filterKind="",this.resetConstructor()}buildLoading(){const e=window.libComponent.buildLoading({color:"purple"}),t=`\n            <div class="ds-${siteTheme.cssLoadingWrapper}">\n                ${e}\n            </div>\n        `;this.elPosts.insertAdjacentHTML("beforeend",t)}buildListener(){this.elLoadMore.addEventListener("click",(()=>{this.clickLoadMore()}))}buildPayload(e=void 0){const t={endpoint:"site/blog",limit:this.limit,offset:this.offset,language:window.globalLanguage};return e?.filter&&(t.filter=e.filter),e?.filterKind&&(t.filterKind=e.filterKind),t}clickLoadMore(){this.loadData({filter:this.filter,filterKind:this.filterKind})}drawList(e){let t="";e.forEach((e=>{const i=e.content,s=window.urlAssetsBlogThumbnail+e.thumbnail,l=`${window.linkPost+e.id}/${e.url}/`,n=e.title,r=e.date_post;t+=`\n                <a href="${l}" class="ds-row ds-post">\n                    <div class="ds-post__item">\n                        <img src="${s}">\n                    </div>\n                    <div class="ds-post__item">\n                        <h3 class="ds-title">${n}</h3>\n                        <p>${i}</p>\n                        <p>${r}</p>\n                    </div>\n                </a>\n            `})),this.elPosts.insertAdjacentHTML("beforeend",t)}init(){this.updateHTML(),this.elPage&&(this.buildListener(),this.clickLoadMore())}loadData(e){this.buildLoading();const t=this.buildPayload(e);window.libHelper.fetchData(t).then((e=>{const t=e.content;this.drawList(t),this.removeLoading(),this.responseLength=t.length,this.toggleLoadMore(),this.limit+=this.results}))}removeLoading(){this.updateHTML(),this.elLoading.remove()}resetConstructor(){this.limit=0,this.offset=this.results,this.responseLength=0}toggleLoadMore(){this.responseLength>=this.results?window.libHelper.removeClass(this.elLoadMore,siteTheme.cssButtonDisabled):window.libHelper.addClass(this.elLoadMore,siteTheme.cssButtonDisabled)}updateHTML(){this.elPage=document.getElementById("blog"),this.elPage&&(this.elPosts=document.getElementById("blog_posts"),this.elLoadMore=document.getElementById("blog_load_more"),this.elLoading=this.elPosts.querySelector(`.ds-${siteTheme.cssLoadingWrapper}`))}}export class Cookies{constructor(){this.storage="cookies_advise--5"}handleClose(){localStorage.setItem(this.storage,!0),this.elButtonClose.removeEventListener("click",this.handleClose.bind(this)),this.removeMessage()}init(){const e=localStorage.getItem(this.storage);this.updateHtml(),this.elCookiesAdvise&&(this.elButtonClose.addEventListener("click",this.handleClose.bind(this)),e?this.removeMessage():this.showMessage())}updateHtml(){this.elCookiesAdvise=document.getElementById("cookies_advise"),this.elButtonClose=this.elCookiesAdvise?.querySelector(".ds-button")}removeMessage(){this.elCookiesAdvise.remove()}showMessage(){this.elCookiesAdvise.classList.contains(siteTheme.cssDisplay)&&this.elCookiesAdvise.classList.remove(siteTheme.cssDisplay)}}export class Ranking{constructor(){this.currentFilter,this.results=50,this.limit,this.offset,this.timeout=null,this.filter="",this.filterKind="",this.resetConstructor()}buildLoading(){const e=window.libComponent.buildLoading({color:"purple"}),t=`\n            <tr class="ds-${siteTheme.cssLoadingWrapper}">\n                <td colspan="100%">${e}</td>\n            </tr>\n        `;this.elTbody.insertAdjacentHTML("beforeend",t)}buildListener(){this.elLoadMore.addEventListener("click",(()=>{this.clickLoadMore()})),this.elFilterWarrior.addEventListener("click",(()=>{this.clickWarrior(this.elFilterClass)})),this.elFilterWizard.addEventListener("click",(()=>{this.clickWizard(this.elFilterClass)})),this.elFilterHunter.addEventListener("click",(()=>{this.clickHunter(this.elFilterClass)})),this.elFilterMerchant.addEventListener("click",(()=>{this.clickMerchant(this.elFilterClass)})),this.elFilterExperience.addEventListener("click",(()=>{this.clickExperience(this.elFilterExperience)})),this.elFilterSearch.addEventListener("click",(()=>{this.clickSearch(this.elFilterSearch)})),this.elFilterInput.addEventListener("input",(()=>{this.filterSearchByKey()}))}buildPayload(e=void 0){const t={endpoint:"site/ranking",limit:this.limit,offset:this.offset};return e?.filter&&(t.filter=e.filter),e?.filterKind&&(t.filterKind=e.filterKind),t}clickLoadMore(){this.loadData({filter:this.filter,filterKind:this.filterKind})}clearTable(){this.elTbody.innerHTML="",this.resetConstructor(),this.toggleLoadMore()}clickExperience(e){this.clickDefault(e),this.filterSearch("","")}clickHunter(e){this.clickDefault(e),this.filterSearch("2","class")}clickMerchant(e){this.clickDefault(e),this.filterSearch("3","class")}clickSearch(e){this.clickDefault(e),window.libHelper.toggleClass(this.elFilter,siteTheme.cssDisplay),this.elFilterInput.value="",this.elFilterInput.focus()}clickWarrior(e){this.clickDefault(e),this.filterSearch("0","class")}clickWizard(e){this.clickDefault(e),this.filterSearch("1","class")}clickDefault(e){this.elFilterMenu.forEach((e=>{window.libHelper.removeClass(e,siteTheme.cssButtonActive)})),window.libHelper.addClass(e,siteTheme.cssButtonActive),window.libHelper.addClass(this.elFilter,siteTheme.cssDisplay)}drawTable(e,t){let i="";const s=""!==t?.filterKind&&t?"":siteTheme.cssTableDestak,l="class"===t?.filterKind?siteTheme.cssTableDestak:"",n="character"===t?.filterKind?siteTheme.cssTableDestak:"";e.forEach((e=>{const t=this.translateClass(e.about_class),r=this.formatExperience(e.about_experience);i+=`\n                <tr>\n                    <td></td>\n                    <td class="ds-${n}">${e.about_name}</td>\n                    <td>${e.user}</td>\n                    <td class="ds-${l}">${t}</td>\n                    <td>${e.about_level}</td>\n                    <td class="ds-${s}">${r}</td>\n                </tr>\n            `})),this.elTbody.insertAdjacentHTML("beforeend",i)}filterRanking(e){this.clearTable(),this.loadData(e)}filterSearch(e,t){this.filter=e,this.filterKind=t,e!==this.currentFilter&&(this.filterRanking({filter:e,filterKind:t}),this.currentFilter=e)}filterSearchByKey(){this.clearTable(),this.buildLoading(),clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.filterSearch(this.elFilterInput.value,"character")}),1e3)}formatExperience(e){const t=document.documentElement.lang||"en-US";return e.toLocaleString(t)}init(){this.updateHTML(),this.elPage&&(this.buildListener(),this.elFilterMenu[0].click())}loadData(e){this.buildLoading();const t=this.buildPayload(e);window.libHelper.fetchData(t).then((t=>{const i=t.content;this.drawTable(i,e),this.removeLoading(),this.responseLength=i.length,this.toggleLoadMore(),this.limit+=this.results}))}removeLoading(){this.updateHTML(),this.elLoading.remove()}resetConstructor(){this.limit=0,this.offset=this.results,this.responseLength=0}toggleLoadMore(){this.responseLength>=this.results?window.libHelper.removeClass(this.elLoadMore,siteTheme.cssButtonDisabled):window.libHelper.addClass(this.elLoadMore,siteTheme.cssButtonDisabled)}translateClass(e){const t=window.translationGame.player;switch(e){case 0:return t.class_warrior;case 1:return t.class_wizard;case 2:return t.class_hunter;case 3:return t.class_merchant}}updateHTML(){this.elPage=document.getElementById("ranking"),this.elPage&&(this.elLoadMore=document.getElementById("ranking_load_more"),this.elTbody=this.elPage.querySelector("tbody"),this.elFilterMenu=document.getElementById("ranking_menu").querySelectorAll(".ds-button"),this.elFilterExperience=document.getElementById("ranking_experience"),this.elLoading=this.elTbody.querySelector(`.ds-${siteTheme.cssLoadingWrapper}`),this.elFilterClass=document.getElementById("ranking_class"),this.elFilterWarrior=document.getElementById("ranking_warrior"),this.elFilterWizard=document.getElementById("ranking_wizard"),this.elFilterHunter=document.getElementById("ranking_hunter"),this.elFilterMerchant=document.getElementById("ranking_merchant"),this.elFilterSearch=document.getElementById("ranking_search"),this.elFilter=document.getElementById("ranking_filter"),this.elFilterInput=document.getElementById("ranking_search_value"))}}export class Theme{constructor(){this.cssButtonActive="ds-button--active",this.cssButtonDisabled="ds-button--disabled",this.cssDisplay="ds-display-none",this.cssLoadingWrapper="ds-loading__wrapper",this.cssTableDestak="ds-td--destak"}buildListener(){this.elButtonSelectLanguage?.addEventListener("change",(e=>{this.changeLanguage(e.target.value)}))}changeLanguage(e){const t={isJson:!0,endpoint:"language",language:e};window.libHelper.fetchData(t).then((e=>{e.content.isSuccess&&window.location.reload()}))}init(){this.updateHTML(),this.buildListener()}updateHTML(){this.elButtonSelectLanguage=document.getElementById("select_language")}}